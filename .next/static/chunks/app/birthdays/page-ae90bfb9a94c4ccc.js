(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[830],{8988:function(e,t,r){Promise.resolve().then(r.bind(r,6344))},6344:function(e,t,r){"use strict";r.r(t);var n=r(7437),i=r(4724),s=r(9728);t.default=(0,i.Q)(()=>(0,n.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Birthday Reminders"}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\uD83C\uDF82 Upcoming Birthdays"}),(0,n.jsx)(s.Z,{})]})]}))},9728:function(e,t,r){"use strict";var n=r(7437),i=r(2265),s=r(3082);t.Z=e=>{let{limit:t,showActions:r=!0}=e,[a,o]=(0,i.useState)([]),c=(0,s.createClientComponentClient)(),getUpcomingBirthdays=async()=>{let{data:{session:e}}=await c.auth.getSession();if(!e)return;let{data:r,error:n}=await c.from("birthday_reminders").select("*, contact:contacts(*)").gte("reminder_date",new Date().toISOString()).order("reminder_date",{ascending:!0}).limit(t||100);if(n){console.error("Error fetching birthday reminders:",n);return}o(r)},acknowledgeReminder=async e=>{let{error:t}=await c.from("birthday_reminders").update({reminder_sent:!0}).eq("id",e);if(t){console.error("Error acknowledging reminder:",t);return}getUpcomingBirthdays()};return(0,i.useEffect)(()=>{getUpcomingBirthdays()},[]),(0,n.jsxs)("div",{className:"space-y-4",children:[a.map(e=>(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-medium",children:e.contact.contact_name}),(0,n.jsxs)("p",{className:"text-sm text-gray-500",children:["Birthday: ",new Date(e.reminder_date).toLocaleDateString()]})]}),r&&(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)("button",{onClick:()=>window.open("mailto:"+e.contact.email),className:"px-3 py-1 text-sm bg-primary text-white rounded-md hover:bg-primary-dark",children:"Send Message"}),(0,n.jsx)("button",{onClick:()=>acknowledgeReminder(e.id),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:"Mark Done"})]})]},e.id)),0===a.length&&(0,n.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No upcoming birthdays"})]})}},4724:function(e,t,r){"use strict";r.d(t,{Q:function(){return withAuth}});var n=r(7437),i=r(3082),s=r(4033),a=r(2265);function withAuth(e){return function(t){let r=(0,i.createClientComponentClient)(),o=(0,s.useRouter)();return(0,a.useEffect)(()=>{let checkAuth=async()=>{let{data:{session:e}}=await r.auth.getSession();e||o.replace("/login")};checkAuth()},[o,r.auth]),(0,n.jsx)(e,{...t})}}},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(2265),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var n,s={},d=null,l=null;for(n in void 0!==r&&(d=""+r),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,n)&&!c.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:i,type:e,key:d,ref:l,props:s,_owner:o.current}}t.Fragment=s,t.jsx=q,t.jsxs=q},7437:function(e,t,r){"use strict";e.exports=r(622)},4033:function(e,t,r){e.exports=r(94)}},function(e){e.O(0,[82,971,472,744],function(){return e(e.s=8988)}),_N_E=e.O()}]);