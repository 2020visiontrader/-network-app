(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[329],{233:function(e,t,r){Promise.resolve().then(r.bind(r,4638))},4638:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return CalendarPage}});var s=r(7437),a=r(2265),n=r(3082),i=r(680),l=r(221),c=r(2720);function CalendarPage(){let{user:e}=(0,i.useAuth)(),[t,r]=(0,a.useState)([]),[o,d]=(0,a.useState)(!0),[u,h]=(0,a.useState)(null),[m,x]=(0,a.useState)(new Date),[v,f]=(0,a.useState)(null),[b,g]=(0,a.useState)([]),p=(0,n.createClientComponentClient)();(0,a.useEffect)(()=>{fetchCalendarEvents()},[e,m]);let fetchCalendarEvents=async()=>{if(e)try{d(!0),h(null);let t=new Date(m.getFullYear(),m.getMonth(),1),s=new Date(m.getFullYear(),m.getMonth()+1,0),a=t.toISOString().split("T")[0],n=s.toISOString().split("T")[0],i=[],{data:l}=await p.from("contacts").select("id, full_name, birthday").eq("user_id",e.id).not("birthday","is",null);l&&l.forEach(e=>{if(e.birthday){let r=new Date(e.birthday),a=new Date(m.getFullYear(),r.getMonth(),r.getDate());a>=t&&a<=s&&i.push({id:"birthday-".concat(e.id),type:"birthday",title:"".concat(e.full_name,"'s Birthday"),date:a.toISOString().split("T")[0],icon:"\uD83C\uDF82",details:e})}});let{data:c}=await p.from("travel_checkins").select("*").eq("user_id",e.id).or("check_in_date.gte.".concat(a,",check_out_date.lte.").concat(n));c&&c.forEach(e=>{i.push({id:"travel-".concat(e.id),type:"travel",title:"Travel to ".concat(e.city),date:e.check_in_date,icon:"✈️",details:e})});let{data:o}=await p.from("coffee_chat_availability").select("*").eq("user_id",e.id).gte("available_date",a).lte("available_date",n);o&&o.forEach(e=>{i.push({id:"coffee-".concat(e.id),type:"coffee",title:"Coffee Chat Available",date:e.available_date,time:e.time_slot,icon:"☕",details:e})});let{data:u}=await p.from("mastermind_sessions").select("*").contains("attendees",[e.id]).gte("date_time",a).lte("date_time",n);u&&u.forEach(e=>{i.push({id:"mastermind-".concat(e.id),type:"mastermind",title:e.title,date:e.date_time.split("T")[0],time:new Date(e.date_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),icon:"\uD83E\uDDE0",details:e})}),r(i)}catch(e){console.error("Error fetching calendar events:",e),h("Failed to load calendar events")}finally{d(!1)}},getEventsForDate=e=>{let r=new Date(m.getFullYear(),m.getMonth(),e).toISOString().split("T")[0];return t.filter(e=>e.date===r)},handleDateClick=e=>{let t=new Date(m.getFullYear(),m.getMonth(),e).toISOString().split("T")[0],r=getEventsForDate(e);f(t),g(r)},navigateMonth=e=>{x(t=>{let r=new Date(t);return"prev"===e?r.setMonth(t.getMonth()-1):r.setMonth(t.getMonth()+1),r})};return o?(0,s.jsx)(l.Z,{fullScreen:!0,message:"Synchronizing temporal matrix..."}):(0,s.jsx)(c.Z,{children:(0,s.jsxs)("div",{className:"space-y-6 gradient-mesh min-h-screen",children:[(0,s.jsxs)("div",{className:"card-mobile border-accent/20",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 gradient-hive rounded-hive flex items-center justify-center shadow-glow",children:(0,s.jsx)("span",{className:"text-white text-lg",children:"\uD83D\uDCC5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"heading-lg-mobile text-text",children:"Temporal Matrix"}),(0,s.jsx)("p",{className:"text-xs text-subtle",children:"Unified event synchronization"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-accent2 rounded-full pulse-hive"}),(0,s.jsxs)("span",{className:"text-xs text-subtle",children:[t.length," events"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("button",{onClick:()=>navigateMonth("prev"),className:"p-2 rounded-hive hover:bg-surface/50 transition-colors duration-200",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-subtle",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,s.jsxs)("h2",{className:"heading-md-mobile text-text",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][m.getMonth()]," ",m.getFullYear()]}),(0,s.jsx)("button",{onClick:()=>navigateMonth("next"),className:"p-2 rounded-hive hover:bg-surface/50 transition-colors duration-200",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-subtle",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),u&&(0,s.jsx)("div",{className:"card-mobile border-error/30 bg-surface/90",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-error",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,s.jsx)("span",{className:"text-sm text-error",children:u})]})}),(0,s.jsxs)("div",{className:"card-mobile",children:[(0,s.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,s.jsx)("div",{className:"text-center text-xs font-medium text-subtle py-2",children:e},e))}),(0,s.jsx)("div",{className:"grid grid-cols-7 gap-1",children:(()=>{let e=m.getFullYear(),t=m.getMonth(),r=new Date(e,t,1),s=new Date(e,t+1,0),a=s.getDate(),n=r.getDay(),i=[];for(let e=0;e<n;e++)i.push(null);for(let e=1;e<=a;e++)i.push(e);return i})().map((e,t)=>{if(null===e)return(0,s.jsx)("div",{className:"h-12"},t);let r=getEventsForDate(e),a=new Date().toDateString()===new Date(m.getFullYear(),m.getMonth(),e).toDateString();return(0,s.jsx)("button",{onClick:()=>handleDateClick(e),className:"h-12 p-1 rounded-hive text-xs transition-all duration-200 ".concat(a?"bg-accent/20 text-accent border border-accent/30":"hover:bg-surface/50 text-text"),children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"font-medium",children:e}),(0,s.jsxs)("div",{className:"flex justify-center space-x-1 mt-1",children:[r.slice(0,3).map((e,t)=>(0,s.jsx)("span",{className:"text-xs",children:e.icon},t)),r.length>3&&(0,s.jsx)("span",{className:"text-xs text-accent",children:"+"})]})]})},e)})})]}),v&&b.length>0&&(0,s.jsxs)("div",{className:"card-mobile border-accent/30 animate-slide-down",children:[(0,s.jsxs)("h3",{className:"heading-md-mobile text-text mb-4",children:["Events for ",new Date(v).toLocaleDateString()]}),(0,s.jsx)("div",{className:"space-y-3",children:b.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-2 rounded-hive bg-surface/50",children:[(0,s.jsx)("span",{className:"text-lg",children:e.icon}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-text text-sm",children:e.title}),e.time&&(0,s.jsx)("div",{className:"text-xs text-subtle",children:e.time})]})]},e.id))})]})]})})}},2720:function(e,t,r){"use strict";var s=r(7437),a=r(2265),n=r(1396),i=r.n(n);let ErrorBoundary=class ErrorBoundary extends a.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){if(this.state.hasError){if(this.props.fallback){let e=this.props.fallback;return(0,s.jsx)(e,{error:this.state.error,retry:this.retry})}return(0,s.jsx)(DefaultErrorFallback,{error:this.state.error,retry:this.retry})}return this.props.children}constructor(e){super(e),this.retry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.state={hasError:!1}}};let DefaultErrorFallback=e=>{let{error:t,retry:r}=e;return(0,s.jsx)("div",{className:"min-h-screen bg-background gradient-mesh flex items-center justify-center px-4",children:(0,s.jsxs)("div",{className:"card-mobile border-error/30 max-w-md w-full text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 gradient-hive rounded-hive flex items-center justify-center mx-auto mb-6 opacity-50",children:(0,s.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",className:"text-white",children:[(0,s.jsx)("circle",{cx:"16",cy:"16",r:"12",stroke:"currentColor",strokeWidth:"2",fill:"none"}),(0,s.jsx)("path",{d:"M16 8v8M16 20h.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),(0,s.jsx)("h1",{className:"heading-lg-mobile mb-2 text-text",children:"Neural Interface Error"}),(0,s.jsx)("p",{className:"body-base-mobile text-subtle mb-6",children:"A system anomaly has been detected. The neural pathway encountered an unexpected signal disruption."}),t&&(0,s.jsx)("div",{className:"bg-surface border border-error/20 rounded-hive p-4 mb-6 text-left",children:(0,s.jsx)("p",{className:"text-xs text-error font-mono break-all",children:t.message})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("button",{onClick:r,className:"btn-mobile-primary w-full",children:"Reconnect Neural Link"}),(0,s.jsx)(i(),{href:"/dashboard?demo=true",className:"btn-mobile-secondary w-full inline-block text-center",children:"Return to Hub"})]}),(0,s.jsx)("div",{className:"mt-6 pt-6 border-t border-border",children:(0,s.jsx)("p",{className:"text-xs text-subtle",children:"If this error persists, the network may be experiencing instability."})})]})})};t.Z=ErrorBoundary},221:function(e,t,r){"use strict";var s=r(7437);r(2265),t.Z=e=>{let{size:t="md",message:r="Synchronizing neural network...",fullScreen:a=!1}=e;return(0,s.jsx)("div",{className:a?"min-h-screen bg-background gradient-mesh flex items-center justify-center px-4":"flex items-center justify-center p-8",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"".concat({sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[t]," border-2 border-border rounded-full animate-spin"),children:(0,s.jsx)("div",{className:"absolute inset-0 border-2 border-transparent border-t-accent rounded-full animate-spin"})}),(0,s.jsx)("div",{className:"absolute inset-2 bg-accent/20 rounded-full pulse-hive"})]}),r&&(0,s.jsx)("p",{className:"text-sm text-subtle mt-4 animate-pulse",children:r})]})})}},680:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var s=r(7437),a=r(2265),n=r(7823);let i=(0,a.createContext)({user:null,isLoading:!0});function AuthProvider(e){let{children:t}=e,[r,l]=(0,a.useState)(null),[c,o]=(0,a.useState)(!0),d=(0,n.Z)();return(0,a.useEffect)(()=>{let getUser=async()=>{var e;let{data:{session:t},error:r}=await d.auth.getSession();l(null!==(e=null==t?void 0:t.user)&&void 0!==e?e:null),o(!1);let{data:{subscription:s}}=d.auth.onAuthStateChange((e,t)=>{var r;l(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),o(!1)});return()=>{s.unsubscribe()}};getUser()},[]),(0,s.jsx)(i.Provider,{value:{user:r,isLoading:c},children:t})}let useAuth=()=>(0,a.useContext)(i)},7823:function(e,t,r){"use strict";var s=r(3082);t.Z=()=>(0,s.createClientComponentClient)()}},function(e){e.O(0,[82,176,971,472,744],function(){return e(e.s=233)}),_N_E=e.O()}]);