(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[48],{4952:function(e,t,s){Promise.resolve().then(s.bind(s,1051))},1051:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return MastermindsPage}});var r=s(7437),a=s(2265),n=s(3082),i=s(680),l=s(221),c=s(2720);function MastermindsPage(){let{user:e}=(0,i.useAuth)(),[t,s]=(0,a.useState)([]),[o,d]=(0,a.useState)(!0),[u,x]=(0,a.useState)(null),[m,h]=(0,a.useState)(!1),[p,f]=(0,a.useState)(""),v=(0,n.createClientComponentClient)(),[b,j]=(0,a.useState)({title:"",topic:"",description:"",date_time:"",format:"virtual",location:"",max_capacity:8});(0,a.useEffect)(()=>{fetchSessions()},[]);let fetchSessions=async()=>{try{d(!0),x(null);let{data:e,error:t}=await v.from("mastermind_sessions").select("\n          *,\n          users:host_id (\n            full_name,\n            preferred_name\n          )\n        ").gte("date_time",new Date().toISOString()).order("date_time",{ascending:!0});if(t)throw t;let r=(null==e?void 0:e.map(e=>{var t,s;return{...e,host_name:(null===(t=e.users)||void 0===t?void 0:t.preferred_name)||(null===(s=e.users)||void 0===s?void 0:s.full_name)||"Unknown Host"}}))||[];s(r)}catch(e){console.error("Error fetching sessions:",e),x("Failed to load mastermind sessions")}finally{d(!1)}},createSession=async t=>{if(t.preventDefault(),e)try{d(!0);let{error:t}=await v.from("mastermind_sessions").insert([{...b,host_id:e.id,attendees:[e.id]}]);if(t)throw t;j({title:"",topic:"",description:"",date_time:"",format:"virtual",location:"",max_capacity:8}),h(!1),fetchSessions()}catch(e){console.error("Error creating session:",e),x("Failed to create session")}finally{d(!1)}},toggleAttendance=async(t,s)=>{if(e)try{let r=s.includes(e.id),a=r?s.filter(t=>t!==e.id):[...s,e.id],{error:n}=await v.from("mastermind_sessions").update({attendees:a}).eq("id",t);if(n)throw n;fetchSessions()}catch(e){console.error("Error updating attendance:",e),x("Failed to update attendance")}},g=t.filter(e=>!p||e.topic.toLowerCase().includes(p.toLowerCase()));return o&&0===t.length?(0,r.jsx)(l.Z,{fullScreen:!0,message:"Loading neural collective sessions..."}):(0,r.jsx)(c.Z,{children:(0,r.jsxs)("div",{className:"space-y-6 gradient-mesh min-h-screen",children:[(0,r.jsxs)("div",{className:"card-mobile border-accent/20",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 gradient-hive rounded-hive flex items-center justify-center shadow-glow",children:(0,r.jsx)("span",{className:"text-white text-lg",children:"\uD83E\uDDE0"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"heading-lg-mobile text-text",children:"Neural Collective"}),(0,r.jsx)("p",{className:"text-xs text-subtle",children:"Mastermind sessions for collective intelligence"})]})]}),(0,r.jsx)("button",{onClick:()=>h(!m),className:"btn-mobile-primary text-sm px-4 py-2",children:"Host Session"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"text",placeholder:"Filter by topic...",value:p,onChange:e=>f(e.target.value),className:"input-field text-sm"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-accent2 rounded-full pulse-hive"}),(0,r.jsxs)("span",{className:"text-xs text-subtle",children:[g.length," active"]})]})]})]}),u&&(0,r.jsx)("div",{className:"card-mobile border-error/30 bg-surface/90",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-error",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,r.jsx)("span",{className:"text-sm text-error",children:u})]})}),m&&(0,r.jsxs)("div",{className:"card-mobile border-accent/30 animate-slide-down",children:[(0,r.jsx)("h2",{className:"heading-md-mobile text-text mb-4",children:"Host Neural Session"}),(0,r.jsxs)("form",{onSubmit:createSession,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Session title",value:b.title,onChange:e=>j({...b,title:e.target.value}),className:"input-field",required:!0}),(0,r.jsx)("input",{type:"text",placeholder:"Topic/Theme",value:b.topic,onChange:e=>j({...b,topic:e.target.value}),className:"input-field",required:!0}),(0,r.jsx)("textarea",{placeholder:"Session description",value:b.description,onChange:e=>j({...b,description:e.target.value}),className:"input-field h-20 resize-none",required:!0}),(0,r.jsx)("input",{type:"datetime-local",value:b.date_time,onChange:e=>j({...b,date_time:e.target.value}),className:"input-field",required:!0}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("select",{value:b.format,onChange:e=>j({...b,format:e.target.value}),className:"input-field",children:[(0,r.jsx)("option",{value:"virtual",children:"Virtual"}),(0,r.jsx)("option",{value:"in-person",children:"In-Person"})]}),(0,r.jsx)("input",{type:"number",placeholder:"Max capacity",value:b.max_capacity,onChange:e=>j({...b,max_capacity:parseInt(e.target.value)}),className:"input-field",min:"2",max:"20"})]}),"in-person"===b.format&&(0,r.jsx)("input",{type:"text",placeholder:"Location",value:b.location,onChange:e=>j({...b,location:e.target.value}),className:"input-field",required:!0})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{type:"submit",className:"btn-mobile-primary flex-1",children:"Create Session"}),(0,r.jsx)("button",{type:"button",onClick:()=>h(!1),className:"btn-mobile-secondary flex-1",children:"Cancel"})]})]})]}),(0,r.jsx)("div",{className:"space-y-4",children:0===g.length?(0,r.jsxs)("div",{className:"card-mobile text-center py-8",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-accent/20 rounded-hive flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("span",{className:"text-2xl",children:"\uD83E\uDDE0"})}),(0,r.jsx)("h3",{className:"heading-md-mobile text-text mb-2",children:"No Active Sessions"}),(0,r.jsx)("p",{className:"text-sm text-subtle",children:p?"No sessions match your filter.":"Be the first to host a neural collective session."})]}):g.map(t=>(0,r.jsx)(SessionCard,{session:t,currentUserId:null==e?void 0:e.id,onToggleAttendance:toggleAttendance},t.id))})]})})}let SessionCard=e=>{let{session:t,currentUserId:s,onToggleAttendance:a}=e,n=!!s&&t.attendees.includes(s),i=s===t.host_id,l=t.attendees.length>=t.max_capacity,{date:c,time:o}=(e=>{let t=new Date(e);return{date:t.toLocaleDateString(),time:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}})(t.date_time);return(0,r.jsxs)("div",{className:"card-mobile border-accent/20 hover:border-accent/40 transition-all duration-300",children:[(0,r.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-text text-sm",children:t.title}),(0,r.jsx)("span",{className:"text-xs bg-accent/20 text-accent px-2 py-1 rounded-hive",children:t.topic})]}),(0,r.jsxs)("p",{className:"text-xs text-subtle mb-2",children:["Hosted by ",t.host_name]}),(0,r.jsx)("p",{className:"text-xs text-subtle line-clamp-2",children:t.description})]})}),(0,r.jsx)("div",{className:"flex items-center justify-between text-xs text-subtle mb-3",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("span",{children:"\uD83D\uDCC5"}),(0,r.jsx)("span",{children:c})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("span",{children:"â°"}),(0,r.jsx)("span",{children:o})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("span",{children:"virtual"===t.format?"\uD83D\uDCBB":"\uD83D\uDCCD"}),(0,r.jsx)("span",{children:"virtual"===t.format?"Virtual":t.location})]})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("span",{className:"text-xs",children:"\uD83D\uDC65"}),(0,r.jsxs)("span",{className:"text-xs text-subtle",children:[t.attendees.length,"/",t.max_capacity]})]}),l&&!n&&(0,r.jsx)("span",{className:"text-xs bg-warning/20 text-warning px-2 py-1 rounded-hive",children:"Full"})]}),(0,r.jsx)("div",{className:"flex space-x-2",children:i?(0,r.jsx)("span",{className:"text-xs bg-accent2/20 text-accent2 px-3 py-1 rounded-hive",children:"Host"}):(0,r.jsx)("button",{onClick:()=>a(t.id,t.attendees),disabled:!n&&l,className:"text-xs px-3 py-1 rounded-hive font-medium transition-colors duration-200 ".concat(n?"bg-error/20 text-error hover:bg-error/30":l?"bg-border text-subtle cursor-not-allowed":"bg-accent/20 text-accent hover:bg-accent/30"),children:n?"Leave":l?"Full":"Join"})})]})]})}},2720:function(e,t,s){"use strict";var r=s(7437),a=s(2265),n=s(1396),i=s.n(n);let ErrorBoundary=class ErrorBoundary extends a.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){if(this.state.hasError){if(this.props.fallback){let e=this.props.fallback;return(0,r.jsx)(e,{error:this.state.error,retry:this.retry})}return(0,r.jsx)(DefaultErrorFallback,{error:this.state.error,retry:this.retry})}return this.props.children}constructor(e){super(e),this.retry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.state={hasError:!1}}};let DefaultErrorFallback=e=>{let{error:t,retry:s}=e;return(0,r.jsx)("div",{className:"min-h-screen bg-background gradient-mesh flex items-center justify-center px-4",children:(0,r.jsxs)("div",{className:"card-mobile border-error/30 max-w-md w-full text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 gradient-hive rounded-hive flex items-center justify-center mx-auto mb-6 opacity-50",children:(0,r.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",className:"text-white",children:[(0,r.jsx)("circle",{cx:"16",cy:"16",r:"12",stroke:"currentColor",strokeWidth:"2",fill:"none"}),(0,r.jsx)("path",{d:"M16 8v8M16 20h.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),(0,r.jsx)("h1",{className:"heading-lg-mobile mb-2 text-text",children:"Neural Interface Error"}),(0,r.jsx)("p",{className:"body-base-mobile text-subtle mb-6",children:"A system anomaly has been detected. The neural pathway encountered an unexpected signal disruption."}),t&&(0,r.jsx)("div",{className:"bg-surface border border-error/20 rounded-hive p-4 mb-6 text-left",children:(0,r.jsx)("p",{className:"text-xs text-error font-mono break-all",children:t.message})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("button",{onClick:s,className:"btn-mobile-primary w-full",children:"Reconnect Neural Link"}),(0,r.jsx)(i(),{href:"/dashboard?demo=true",className:"btn-mobile-secondary w-full inline-block text-center",children:"Return to Hub"})]}),(0,r.jsx)("div",{className:"mt-6 pt-6 border-t border-border",children:(0,r.jsx)("p",{className:"text-xs text-subtle",children:"If this error persists, the network may be experiencing instability."})})]})})};t.Z=ErrorBoundary},221:function(e,t,s){"use strict";var r=s(7437);s(2265),t.Z=e=>{let{size:t="md",message:s="Synchronizing neural network...",fullScreen:a=!1}=e;return(0,r.jsx)("div",{className:a?"min-h-screen bg-background gradient-mesh flex items-center justify-center px-4":"flex items-center justify-center p-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"".concat({sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[t]," border-2 border-border rounded-full animate-spin"),children:(0,r.jsx)("div",{className:"absolute inset-0 border-2 border-transparent border-t-accent rounded-full animate-spin"})}),(0,r.jsx)("div",{className:"absolute inset-2 bg-accent/20 rounded-full pulse-hive"})]}),s&&(0,r.jsx)("p",{className:"text-sm text-subtle mt-4 animate-pulse",children:s})]})})}},680:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var r=s(7437),a=s(2265),n=s(7823);let i=(0,a.createContext)({user:null,isLoading:!0});function AuthProvider(e){let{children:t}=e,[s,l]=(0,a.useState)(null),[c,o]=(0,a.useState)(!0),d=(0,n.Z)();return(0,a.useEffect)(()=>{let getUser=async()=>{var e;let{data:{session:t},error:s}=await d.auth.getSession();l(null!==(e=null==t?void 0:t.user)&&void 0!==e?e:null),o(!1);let{data:{subscription:r}}=d.auth.onAuthStateChange((e,t)=>{var s;l(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null),o(!1)});return()=>{r.unsubscribe()}};getUser()},[]),(0,r.jsx)(i.Provider,{value:{user:s,isLoading:c},children:t})}let useAuth=()=>(0,a.useContext)(i)},7823:function(e,t,s){"use strict";var r=s(3082);t.Z=()=>(0,r.createClientComponentClient)()}},function(e){e.O(0,[82,176,971,472,744],function(){return e(e.s=4952)}),_N_E=e.O()}]);