(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[921],{5710:function(e,t,r){Promise.resolve().then(r.bind(r,6998))},6998:function(e,t,r){"use strict";r.r(t);var s=r(7437),a=r(4724),n=r(2265),i=r(3082);t.default=(0,a.Q)(()=>{let[e,t]=(0,n.useState)(""),[r,a]=(0,n.useState)(""),[l,c]=(0,n.useState)(!0),[o,d]=(0,n.useState)([]),[u,h]=(0,n.useState)([]),m=(0,i.createClientComponentClient)(),getMyTravelCheckins=async()=>{let{data:e,error:t}=await m.from("travel_checkins").select("*").order("checkin_date",{ascending:!0});if(t){console.error("Error fetching my travel checkins:",t);return}d(e)},getOthersInCity=async e=>{let{data:{session:t}}=await m.auth.getSession();if(!t)return;let{data:r,error:s}=await m.from("travel_checkins").select("*, user:users(*)").eq("city",e).eq("visible_to_others",!0).neq("user_id",t.user.id).order("checkin_date",{ascending:!0});if(s){console.error("Error fetching others travel checkins:",s);return}h(r)},submitTravelCheckin=async s=>{s.preventDefault();let{data:{session:n}}=await m.auth.getSession();if(!n)return;let{error:i}=await m.from("travel_checkins").insert([{user_id:n.user.id,city:e,checkin_date:r||null,visible_to_others:l}]);if(i){console.error("Error submitting travel checkin:",i);return}t(""),a(""),getMyTravelCheckins(),e&&getOthersInCity(e)};return(0,n.useEffect)(()=>{getMyTravelCheckins()},[]),(0,n.useEffect)(()=>{e&&getOthersInCity(e)},[e]),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Travel Check-ins"}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\uD83D\uDDFA My Travel Plans"}),(0,s.jsxs)("form",{onSubmit:submitTravelCheckin,className:"space-y-4",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["I'll be in",(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Enter city name",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",required:!0})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Date (optional)",(0,s.jsx)("input",{type:"date",value:r,onChange:e=>a(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary"})]})}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:l,onChange:e=>c(e.target.checked),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),(0,s.jsx)("label",{className:"ml-2 block text-sm text-gray-700",children:"Let others know I'll be there"})]}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-primary text-white py-2 px-4 rounded-md hover:bg-primary-dark transition-colors",children:"Add Travel Plan"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\uD83C\uDF0E My Travel Check-ins"}),(0,s.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between border-b pb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.city}),e.checkin_date&&(0,s.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.checkin_date).toLocaleDateString()})]}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-sm ".concat(e.visible_to_others?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.visible_to_others?"Visible":"Private"})]},e.id))})]}),e&&u.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["\uD83D\uDCCD Others in ",e]}),(0,s.jsx)("div",{className:"space-y-4",children:u.map(e=>(0,s.jsx)("div",{className:"flex items-center justify-between border-b pb-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.user.full_name}),e.checkin_date&&(0,s.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.checkin_date).toLocaleDateString()})]})},e.id))})]})]})})},4724:function(e,t,r){"use strict";r.d(t,{Q:function(){return withAuth}});var s=r(7437),a=r(3082),n=r(4033),i=r(2265);function withAuth(e){return function(t){let r=(0,a.createClientComponentClient)(),l=(0,n.useRouter)();return(0,i.useEffect)(()=>{let checkAuth=async()=>{let{data:{session:e}}=await r.auth.getSession();e||l.replace("/login")};checkAuth()},[l,r.auth]),(0,s.jsx)(e,{...t})}}},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=r(2265),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var s,n={},o=null,d=null;for(s in void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,s)&&!c.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===n[s]&&(n[s]=t[s]);return{$$typeof:a,type:e,key:o,ref:d,props:n,_owner:l.current}}t.Fragment=n,t.jsx=q,t.jsxs=q},7437:function(e,t,r){"use strict";e.exports=r(622)},4033:function(e,t,r){e.exports=r(94)}},function(e){e.O(0,[82,971,472,744],function(){return e(e.s=5710)}),_N_E=e.O()}]);