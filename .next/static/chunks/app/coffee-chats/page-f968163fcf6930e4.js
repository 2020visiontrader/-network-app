(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{7008:function(e,t,a){Promise.resolve().then(a.bind(a,9770))},9770:function(e,t,a){"use strict";a.r(t);var s=a(7437),r=a(2265),l=a(4724),i=a(3082);t.default=(0,l.Q)(()=>{let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)([]),[c,n]=(0,r.useState)(!0),[o,d]=(0,r.useState)(!1),[h,u]=(0,r.useState)({city:"",date_available:"",public_visibility:!0}),m=(0,i.createClientComponentClient)(),fetchMyCoffeeChats=async()=>{try{let{data:{session:e}}=await m.auth.getSession();if(!e)return;let{data:a,error:s}=await m.from("coffee_chats").select("*").eq("user_id",e.user.id).order("date_available",{ascending:!0});if(s)throw s;t(a||[])}catch(e){console.error("Error fetching my coffee chats:",e)}},fetchAvailableMatches=async()=>{try{let e=await fetch("/api/coffee-chats/matches");if(e.ok){let t=await e.json();l(t)}}catch(e){console.error("Error fetching available matches:",e)}finally{n(!1)}},createCoffeeChat=async e=>{e.preventDefault();try{let{data:{session:e}}=await m.auth.getSession();if(!e)return;let{error:t}=await m.from("coffee_chats").insert([{...h,user_id:e.user.id}]);if(t)throw t;u({city:"",date_available:"",public_visibility:!0}),d(!1),fetchMyCoffeeChats(),fetchAvailableMatches()}catch(e){console.error("Error creating coffee chat:",e)}},deleteCoffeeChat=async e=>{try{let{error:t}=await m.from("coffee_chats").delete().eq("id",e);if(t)throw t;fetchMyCoffeeChats(),fetchAvailableMatches()}catch(e){console.error("Error deleting coffee chat:",e)}};return((0,r.useEffect)(()=>{fetchMyCoffeeChats(),fetchAvailableMatches()},[]),c)?(0,s.jsx)("div",{className:"max-w-6xl mx-auto p-6",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)("div",{className:"space-y-4",children:[1,2].map(e=>(0,s.jsx)("div",{className:"h-24 bg-gray-200 rounded"},e))}),(0,s.jsx)("div",{className:"space-y-4",children:[1,2].map(e=>(0,s.jsx)("div",{className:"h-24 bg-gray-200 rounded"},e))})]})]})}):(0,s.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Coffee Chats"}),(0,s.jsx)("button",{onClick:()=>d(!0),className:"bg-primary text-white px-4 py-2 rounded-md hover:bg-primary-dark transition-colors",children:"Schedule Coffee Chat"})]}),o&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Schedule a Coffee Chat"}),(0,s.jsxs)("form",{onSubmit:createCoffeeChat,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["City *",(0,s.jsx)("input",{type:"text",value:h.city,onChange:e=>u({...h,city:e.target.value}),placeholder:"Where are you available?",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",required:!0})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Available Date *",(0,s.jsx)("input",{type:"date",value:h.date_available,onChange:e=>u({...h,date_available:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",required:!0})]})})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:h.public_visibility,onChange:e=>u({...h,public_visibility:e.target.checked}),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),(0,s.jsx)("label",{className:"ml-2 block text-sm text-gray-700",children:"Make this visible to other members"})]}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{type:"submit",className:"bg-primary text-white px-4 py-2 rounded-md hover:bg-primary-dark transition-colors",children:"Schedule Coffee Chat"}),(0,s.jsx)("button",{type:"button",onClick:()=>d(!1),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"☕ My Coffee Chats"}),(0,s.jsx)("div",{className:"space-y-4",children:0===e.length?(0,s.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[(0,s.jsx)("p",{className:"text-gray-500",children:"No coffee chats scheduled"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"Schedule one to meet new people!"})]}):e.map(e=>(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold",children:e.city}),(0,s.jsx)("p",{className:"text-gray-600",children:new Date(e.date_available).toLocaleDateString()}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.public_visibility?"Public":"Private"})]}),(0,s.jsx)("button",{onClick:()=>deleteCoffeeChat(e.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Cancel"})]})},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\uD83E\uDD1D Available Matches"}),(0,s.jsx)("div",{className:"space-y-4",children:0===a.length?(0,s.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[(0,s.jsx)("p",{className:"text-gray-500",children:"No matches available"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"Check back later or schedule your own!"})]}):a.map(e=>{var t,a;return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold",children:(null===(t=e.user)||void 0===t?void 0:t.full_name)||"Anonymous"}),(0,s.jsx)("p",{className:"text-gray-600",children:e.city}),(0,s.jsx)("p",{className:"text-gray-600",children:new Date(e.date_available).toLocaleDateString()}),(null===(a=e.user)||void 0===a?void 0:a.role)&&(0,s.jsx)("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded mt-1",children:e.user.role})]}),(0,s.jsx)("button",{className:"bg-primary text-white px-3 py-1 rounded text-sm hover:bg-primary-dark transition-colors",children:"Connect"})]})},e.id)})})]})]}),(0,s.jsxs)("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"How Coffee Chats Work"}),(0,s.jsxs)("ul",{className:"text-blue-800 text-sm space-y-1",children:[(0,s.jsx)("li",{children:"• Schedule when and where you're available for coffee"}),(0,s.jsx)("li",{children:"• See other members who are available in your city"}),(0,s.jsx)("li",{children:"• Connect with people to expand your network"}),(0,s.jsx)("li",{children:"• Make your availability public or keep it private"})]})]})]})})},4724:function(e,t,a){"use strict";a.d(t,{Q:function(){return withAuth}});var s=a(7437),r=a(3082),l=a(4033),i=a(2265);function withAuth(e){return function(t){let a=(0,r.createClientComponentClient)(),c=(0,l.useRouter)();return(0,i.useEffect)(()=>{let checkAuth=async()=>{let{data:{session:e}}=await a.auth.getSession();e||c.replace("/login")};checkAuth()},[c,a.auth]),(0,s.jsx)(e,{...t})}}},622:function(e,t,a){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=a(2265),r=Symbol.for("react.element"),l=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,c=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,a){var s,l={},o=null,d=null;for(s in void 0!==a&&(o=""+a),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,s)&&!n.hasOwnProperty(s)&&(l[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===l[s]&&(l[s]=t[s]);return{$$typeof:r,type:e,key:o,ref:d,props:l,_owner:c.current}}t.Fragment=l,t.jsx=q,t.jsxs=q},7437:function(e,t,a){"use strict";e.exports=a(622)},4033:function(e,t,a){e.exports=a(94)}},function(e){e.O(0,[82,971,472,744],function(){return e(e.s=7008)}),_N_E=e.O()}]);