(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38],{2896:function(e,t,s){Promise.resolve().then(s.bind(s,8459))},8459:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return EventsPage}});var r=s(7437),n=s(2265),a=s(3082),i=s(680),l=s(221),c=s(2720);function EventsPage(){let{user:e}=(0,i.useAuth)(),[t,s]=(0,n.useState)([]),[o,d]=(0,n.useState)([]),[u,x]=(0,n.useState)(!0),[h,m]=(0,n.useState)(null),[v,f]=(0,n.useState)("local"),[b,p]=(0,n.useState)(""),j=(0,a.createClientComponentClient)();(0,n.useEffect)(()=>{fetchEvents()},[e]);let fetchEvents=async()=>{if(e)try{x(!0),m(null);let{data:t}=await j.from("users").select("city, niche_tags").eq("id",e.id).single();if(!t)throw Error("User data not found");let{data:r,error:n}=await j.from("event_suggestions").select("*").eq("city",t.city).gte("event_date",new Date().toISOString().split("T")[0]).order("event_date",{ascending:!0});if(n)throw n;let{data:a,error:i}=await j.from("travel_checkins").select("city, check_in_date, check_out_date").eq("user_id",e.id).gte("check_in_date",new Date().toISOString().split("T")[0]);if(i)throw i;let l=[];if(a&&a.length>0){let e=a.map(e=>e.city),{data:t,error:s}=await j.from("event_suggestions").select("*").in("city",e).gte("event_date",new Date().toISOString().split("T")[0]).order("event_date",{ascending:!0});if(s)throw s;l=t||[]}s(r||[]),d(l)}catch(e){console.error("Error fetching events:",e),m("Failed to load event suggestions")}finally{x(!1)}},g=t.filter(e=>!b||e.niche_tag.toLowerCase().includes(b.toLowerCase())),N=o.filter(e=>!b||e.niche_tag.toLowerCase().includes(b.toLowerCase())),y="local"===v?g:N;return u?(0,r.jsx)(l.Z,{fullScreen:!0,message:"Scanning neural event matrix..."}):(0,r.jsx)(c.Z,{children:(0,r.jsxs)("div",{className:"space-y-6 gradient-mesh min-h-screen",children:[(0,r.jsxs)("div",{className:"card-mobile border-accent/20",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 gradient-connection rounded-hive flex items-center justify-center shadow-glow-accent2",children:(0,r.jsx)("span",{className:"text-white text-lg",children:"\uD83C\uDF10"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"heading-lg-mobile text-text",children:"Event Matrix"}),(0,r.jsx)("p",{className:"text-xs text-subtle",children:"Discover connections in your network"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-accent2 rounded-full pulse-hive"}),(0,r.jsxs)("span",{className:"text-xs text-subtle",children:[y.length," signals"]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-1 mb-4",children:[(0,r.jsx)("button",{onClick:()=>f("local"),className:"flex-1 py-2 px-3 rounded-hive text-sm font-medium transition-all duration-200 ".concat("local"===v?"bg-accent text-white shadow-glow":"text-subtle hover:text-text hover:bg-surface/50"),children:"\uD83D\uDCCD Local Matrix"}),(0,r.jsx)("button",{onClick:()=>f("travel"),className:"flex-1 py-2 px-3 rounded-hive text-sm font-medium transition-all duration-200 ".concat("travel"===v?"bg-accent text-white shadow-glow":"text-subtle hover:text-text hover:bg-surface/50"),children:"✈️ Travel Signals"})]}),(0,r.jsx)("input",{type:"text",placeholder:"Filter by niche tag...",value:b,onChange:e=>p(e.target.value),className:"input-field text-sm"})]}),h&&(0,r.jsx)("div",{className:"card-mobile border-error/30 bg-surface/90",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-error",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,r.jsx)("span",{className:"text-sm text-error",children:h})]})}),(0,r.jsx)("div",{className:"space-y-4",children:0===y.length?(0,r.jsxs)("div",{className:"card-mobile text-center py-8",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-accent2/20 rounded-hive flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("span",{className:"text-2xl",children:"\uD83C\uDF10"})}),(0,r.jsx)("h3",{className:"heading-md-mobile text-text mb-2",children:"No Events Detected"}),(0,r.jsx)("p",{className:"text-sm text-subtle",children:"local"===v?"No events found in your local matrix.":"No events found for your travel destinations."})]}):y.map(e=>(0,r.jsx)(EventCard,{event:e},e.id))})]})})}let EventCard=e=>{let{event:t}=e;return(0,r.jsxs)("div",{className:"card-mobile border-accent2/20 hover:border-accent2/40 transition-all duration-300",children:[(0,r.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-text text-sm",children:t.title}),(0,r.jsx)("span",{className:"text-xs bg-accent2/20 text-accent2 px-2 py-1 rounded-hive",children:t.niche_tag})]}),(0,r.jsx)("p",{className:"text-xs text-subtle line-clamp-3 mb-2",children:t.description})]})}),(0,r.jsx)("div",{className:"flex items-center justify-between text-xs text-subtle mb-3",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("span",{children:"\uD83D\uDCC5"}),(0,r.jsx)("span",{children:(e=>{let t=new Date(e);return t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})})(t.event_date)})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("span",{children:"\uD83D\uDCCD"}),(0,r.jsx)("span",{children:t.city})]})]})}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[t.external_link&&(0,r.jsx)("button",{onClick:()=>{t.external_link&&window.open(t.external_link,"_blank","noopener,noreferrer")},className:"flex-1 bg-accent2/20 text-accent2 hover:bg-accent2/30 px-3 py-2 rounded-hive text-xs font-medium transition-colors duration-200",children:"View Event Site"}),(0,r.jsx)("button",{className:"flex-1 bg-accent/20 text-accent hover:bg-accent/30 px-3 py-2 rounded-hive text-xs font-medium transition-colors duration-200",children:"Add to Calendar"})]})]})}},2720:function(e,t,s){"use strict";var r=s(7437),n=s(2265),a=s(1396),i=s.n(a);let ErrorBoundary=class ErrorBoundary extends n.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){if(this.state.hasError){if(this.props.fallback){let e=this.props.fallback;return(0,r.jsx)(e,{error:this.state.error,retry:this.retry})}return(0,r.jsx)(DefaultErrorFallback,{error:this.state.error,retry:this.retry})}return this.props.children}constructor(e){super(e),this.retry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.state={hasError:!1}}};let DefaultErrorFallback=e=>{let{error:t,retry:s}=e;return(0,r.jsx)("div",{className:"min-h-screen bg-background gradient-mesh flex items-center justify-center px-4",children:(0,r.jsxs)("div",{className:"card-mobile border-error/30 max-w-md w-full text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 gradient-hive rounded-hive flex items-center justify-center mx-auto mb-6 opacity-50",children:(0,r.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",className:"text-white",children:[(0,r.jsx)("circle",{cx:"16",cy:"16",r:"12",stroke:"currentColor",strokeWidth:"2",fill:"none"}),(0,r.jsx)("path",{d:"M16 8v8M16 20h.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),(0,r.jsx)("h1",{className:"heading-lg-mobile mb-2 text-text",children:"Neural Interface Error"}),(0,r.jsx)("p",{className:"body-base-mobile text-subtle mb-6",children:"A system anomaly has been detected. The neural pathway encountered an unexpected signal disruption."}),t&&(0,r.jsx)("div",{className:"bg-surface border border-error/20 rounded-hive p-4 mb-6 text-left",children:(0,r.jsx)("p",{className:"text-xs text-error font-mono break-all",children:t.message})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("button",{onClick:s,className:"btn-mobile-primary w-full",children:"Reconnect Neural Link"}),(0,r.jsx)(i(),{href:"/dashboard?demo=true",className:"btn-mobile-secondary w-full inline-block text-center",children:"Return to Hub"})]}),(0,r.jsx)("div",{className:"mt-6 pt-6 border-t border-border",children:(0,r.jsx)("p",{className:"text-xs text-subtle",children:"If this error persists, the network may be experiencing instability."})})]})})};t.Z=ErrorBoundary},221:function(e,t,s){"use strict";var r=s(7437);s(2265),t.Z=e=>{let{size:t="md",message:s="Synchronizing neural network...",fullScreen:n=!1}=e;return(0,r.jsx)("div",{className:n?"min-h-screen bg-background gradient-mesh flex items-center justify-center px-4":"flex items-center justify-center p-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"".concat({sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[t]," border-2 border-border rounded-full animate-spin"),children:(0,r.jsx)("div",{className:"absolute inset-0 border-2 border-transparent border-t-accent rounded-full animate-spin"})}),(0,r.jsx)("div",{className:"absolute inset-2 bg-accent/20 rounded-full pulse-hive"})]}),s&&(0,r.jsx)("p",{className:"text-sm text-subtle mt-4 animate-pulse",children:s})]})})}},680:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var r=s(7437),n=s(2265),a=s(7823);let i=(0,n.createContext)({user:null,isLoading:!0});function AuthProvider(e){let{children:t}=e,[s,l]=(0,n.useState)(null),[c,o]=(0,n.useState)(!0),d=(0,a.Z)();return(0,n.useEffect)(()=>{let getUser=async()=>{var e;let{data:{session:t},error:s}=await d.auth.getSession();l(null!==(e=null==t?void 0:t.user)&&void 0!==e?e:null),o(!1);let{data:{subscription:r}}=d.auth.onAuthStateChange((e,t)=>{var s;l(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null),o(!1)});return()=>{r.unsubscribe()}};getUser()},[]),(0,r.jsx)(i.Provider,{value:{user:s,isLoading:c},children:t})}let useAuth=()=>(0,n.useContext)(i)},7823:function(e,t,s){"use strict";var r=s(3082);t.Z=()=>(0,r.createClientComponentClient)()}},function(e){e.O(0,[82,176,971,472,744],function(){return e(e.s=2896)}),_N_E=e.O()}]);